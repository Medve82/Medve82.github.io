<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>Bitcoin Árfolyam – 5 év</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 2rem auto;
    }
    canvas {
      background: #fff;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Bitcoin Árfolyam alakulása (USD, elmúlt 5 év)</h1>
  <canvas id="btcChart" width="800" height="400"></canvas>

  <script>
    async function fetchBitcoinData() {
      const options = {
        method: 'GET',
        headers: {
          'X-RapidAPI-Key': 'https://binance43.p.rapidapi.com/ticker/24hr', // <<< IDE tedd a kulcsod!
          'X-RapidAPI-Host': 'yahoo-finance15.p.rapidapi.com'
        }
      };

      const response = await fetch(
        'https://yahoo-finance15.p.rapidapi.com/api/yahoo/hi/history/BTC-USD/5y',
        options
      );

      const data = await response.json();

      const prices = data.items.reverse(); // időrendbe rakás
      const labels = prices.map(p => new Date(p.date).toLocaleDateString());
      const values = prices.map(p => p.close);

      const ctx = document.getElementById('btcChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'Bitcoin árfolyam (USD)',
            data: values,
            borderColor: 'rgb(255, 99, 132)',
            backgroundColor: 'rgba(255, 99, 132, 0.1)',
            fill: true,
            tension: 0.1
          }]
        },
        options: {
          responsive: true,
          scales: {
            x: { display: false },
            y: {
              beginAtZero: false,
              title: {
                display: true,
                text: 'USD'
              }
            }
          }
        }
      });
    }

    fetchBitcoinData();
  </script>
</body>
</html>
